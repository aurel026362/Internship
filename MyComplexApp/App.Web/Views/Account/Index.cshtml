@model App.Web.Models.ComplexViewModel.Intern.CurrentUserDataViewModel
@{
    ViewData["Title"] = "Index";
}

<!DOCTYPE html>
<html>

<head>
    <title>My App</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>

    <link rel="stylesheet" href="~/css/style.css">
    <link rel="stylesheet" href="~/css/UserStyle.css">

    @*<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />*@
    <link href='~/Calendar/assets/css/fullcalendar.css' rel='stylesheet' />
    @*<link href='~/Calendar/assets/css/fullcalendar.print.css' rel='stylesheet' media='print' />*@
    @*<script src='~/Calendar/assets/js/jquery-1.10.2.js' type="text/javascript"></script>*@
    @*<script src='~/Calendar/assets/js/jquery-ui.custom.min.js' type="text/javascript"></script>*@
    <script src='~/Calendar/assets/js/fullcalendar.js' type="text/javascript"></script>
</head>

<body>
    <div class="row" style="width:100%">
        @await Html.PartialAsync("../GeneralViews/_Menu")
        <div class="col-10">
            <div class="tab-content" id="v-pills-tabContent">
                @await Html.PartialAsync("../GeneralViews/_Profile", Model.PersonalData)
                @if (User.IsInRole("Menthor"))
                {
                    @await Html.PartialAsync("Menthor/_Marks", Model)
                }
                else
                {
                    @await Html.PartialAsync("Intern/_Marks", Model)
                }
                @await Html.PartialAsync("../GeneralViews/_Comments", Model)
                @await Html.PartialAsync("../GeneralViews/_Settings", Model.PersonalData)
            </div>
        </div>
    </div>
    <footer class="container-fluid" id="footer">
        <div class="container-fluid">
            <div class="row padding text-center">
                <div class="col-12">
                    <h2>Our Contacts</h2>
                </div>
                <div class="col-12 social padding">
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
    </footer>
</body>
<script>
    $('#myTab a[href="#profile"]').tab('show') // Select tab by name
    $('#myTab li:first-child a').tab('show') // Select first tab
    $('#myTab li:last-child a').tab('show') // Select last tab
    $('#myTab li:nth-child(3) a').tab('show')

    $(document).ready(function () {
        $("#Tbody").empty();

        $("#PersonalData").bind("click", function () {
            var obj = ({
                FirstName: $("#FName").val(),
                LastName: $("#LName").val(),
                PhoneNumber: $("#PhoneNumber").val(),
                DateOfBirth: $("#DateBirth").val()
            });
            $.ajax({
                url: "/Account/EditData",
                type: "POST",
                data: obj,
                datatype: "json",
                success: function () {
                    $("#modalLoginForm").hide(2000);
                    $("#modalLoginForm").addClass("close");
                }
            });
        });

        $("#module").bind("change", function () {
            $.get("/Account/GetMarks", { moduleId: $('#module').val() })
                .done(function (data) {
                    $("#marks-table").html(data);
                })
                .fail(function (data) {
                })
                .always(function () {
                });
        });

        $("#theme").bind("change", function () {
            $.get("/Account/GetComments", { themeId: $('#theme').val() })
                .done(function (data) {
                    $("#comment-div").html(data);
                })
                .fail(function (data) {
                })
                .always(function () {
                });
        });
    });


    $('#calendar').fullCalendar({

        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay,listWeek'
        },
        defaultDate: '2018-11-16',
        navLinks: true,
        eventLimit: true,
        events: [{
            title: 'Front-End Conference',
            start: '2018-11-16',
            end: '2018-11-18'
        },
        {
            title: 'Hair stylist with Mike',
            start: '2018-11-20',
            allDay: true
        },
        {
            title: 'Car mechanic',
            start: '2018-11-14T09:00:00',
            end: '2018-11-14T11:00:00'
        },
        {
            title: 'Dinner with Mike',
            start: '2018-11-21T19:00:00',
            end: '2018-11-21T22:00:00'
        },
        {
            title: 'Chillout',
            start: '2018-11-15',
            allDay: true
        },
        {
            title: 'Vacation',
            start: '2018-11-23',
            end: '2018-11-29'
        },
        ]
    });
</script>
</html>
